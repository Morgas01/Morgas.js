(function(e,t,n){e.util=e.util||{};var r=n("shortcut")({det:"Detached"});REQ=e.util.Request=function(e,t){return"string"==typeof e&&(e={url:e}),e={url:e.url,method:e.data?"POST":"GET",async:!0,user:e.user,password:e.password,responseType:e.responseType||"",upload:e.upload,withCredentials:e.withCredentials===!0,contentType:e.contentType,data:e.data},new r.det([function(){var t=this,n=new XMLHttpRequest;n.open(e.method,e.url,e.async,e.user,e.password),n.responseType=e.responseType,e.contentType?n.setRequestHeader("contentType",value):e.data&&(e.contentType="application/x-www-form-urlencoded;charset=UTF-8",e.data.consctuctor===Object&&(e.contentType="application/json;charset=UTF-8",e.data=JSON.stringify(data)),n.setRequestHeader("contentType",e.contentType)),e.upload&&(n.upload=e.upload),n.onload=function(){200==n.status?t.complete(n):t.error(n.statusText)},n.onerror=function(){t.error("Network Error")},e.progress&&(n.onprogress=e.progress),n.send(e.data)},t])},t("Request",REQ),REQ.json=function(e,t){"string"==typeof e&&(e={url:e}),e.responseType="json";var n=REQ(e),r=n.then(function(e){return e.response},!0);return r.fn.push(t),r},t("Request.json",REQ.json)})(Morgas,Morgas.setModule,Morgas.getModule);