(function(t,e){t.DependencyResolver=t.Class({init:function(t){this.config={},this.addConfig(t)},addConfig:function(e,n){if("object"==typeof e){for(var o=Object.keys(e),s=o.length,i=0;s>i;i++){var r=o[i];(void 0===this.config[r]||n)&&(this.config[r]="string"==typeof e[r]?{deps:[e[r]],uses:[]}:Array.isArray(e[r])?{deps:e[r].slice(),uses:[]}:e[r]!==!0?{deps:(e[r].deps||[]).slice(),uses:(e[r].uses||[]).slice()}:!0)}return!0}return t.debug("DependencyResolver.addConfig: obj is not an object",0),!1},resolve:function(e){var n=[],o=[].concat(e);for(e=[].concat(e);o.length>0;){var s=!0,i=this.config[o[0]];if(void 0===i)t.debug("DependencyResolver.resolve: "+o[0]+" is undefined",2);else if(i!==!0){for(var r=i.deps,c=0;i.uses.length>c;c++)-1===o.indexOf(i.uses[c])&&-1===n.indexOf(i.uses[c])&&(o.push(i.uses[c]),e.push(i.uses[c]));for(var c=0;r.length>c;c++){var u=r[c];if(-1===n.indexOf(u)){var a=o.indexOf(u);if(-1!==a){if(-1===e.indexOf(u))throw new TypeError("cyclic object Dependencies ["+o[0]+","+r[c]+"]");o.splice(a,1)}o=[].concat(u,o),s=!1;break}}}s&&n.push(o.shift())}return n},clone:function(e){var n=null;if(e){n={};var o=function(t){return e+t};for(var s in this.config)n[e+s]=this.config[s]===!0?!0:{deps:this.config[s].deps.map(o),uses:this.config[s].uses.map(o)}}return new t.DependencyResolver(n)}}),e("DepRes",t.DependencyResolver)})(Morgas,Morgas.setModule,Morgas.getModule);